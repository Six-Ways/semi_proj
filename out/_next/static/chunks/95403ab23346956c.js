(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43709,e=>{"use strict";let t,n;var a=e.i(43476),s=e.i(71645),r=e.i(46932),i=e.i(86427),l=e.i(65566),o=e.i(60830),c=e.i(87022);function d(e,t){let n,a=()=>{let{currentTime:a}=t,s=(null===a?0:a.value)/100;n!==s&&e(s),n=s};return c.frame.preUpdate(a,!0),()=>(0,c.cancelFrame)(a)}var u=e.i(30551),m=e.i(89026),h=e.i(49652);let f=new WeakMap,x=(e,t,n)=>(a,s)=>s&&s[0]?s[0][e+"Size"]:(0,m.isSVGElement)(a)&&"getBBox"in a?a.getBBox()[t]:a[n],p=x("inline","width","offsetWidth"),g=x("block","height","offsetHeight");function b({target:e,borderBoxSize:t}){f.get(e)?.forEach(n=>{n(e,{get width(){return p(e,t)},get height(){return g(e,t)}})})}function y(e){e.forEach(b)}let v=new Set;var j=e.i(83920),w=e.i(25791);let N=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),k={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function F(e,t,n,a){let s=n[t],{length:r,position:i}=k[t],l=s.current,o=n.time;s.current=e[`scroll${i}`],s.scrollLength=e[`scroll${r}`]-e[`client${r}`],s.offset.length=0,s.offset[0]=0,s.offset[1]=s.scrollLength,s.progress=(0,j.progress)(0,s.scrollLength,s.current);let c=a-o;s.velocity=c>50?0:(0,w.velocityPerSecond)(s.current-l,c)}e.i(47167);var C=e.i(44230),A=e.i(15923),M=e.i(76959),S=e.i(72846);let I={start:0,center:.5,end:1};function E(e,t,n=0){let a=0;if(e in I&&(e=I[e]),"string"==typeof e){let t=parseFloat(e);e.endsWith("px")?a=t:e.endsWith("%")?e=t/100:e.endsWith("vw")?a=t/100*document.documentElement.clientWidth:e.endsWith("vh")?a=t/100*document.documentElement.clientHeight:e=t}return"number"==typeof e&&(a=t*e),n+a}let L=[0,0],O=[[0,0],[1,1]],$={x:0,y:0},B=new WeakMap,P=new WeakMap,T=new WeakMap,W=e=>e===document.scrollingElement?window:e;function z(e,{container:a=document.scrollingElement,...s}={}){if(!a)return o.noop;let r=T.get(a);r||(r=new Set,T.set(a,r));let i=function(e,t,n,a={}){return{measure:t=>{!function(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let a=t;for(;a&&a!==e;)n.x.targetOffset+=a.offsetLeft,n.y.targetOffset+=a.offsetTop,a=a.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}(e,a.target,n),F(e,"x",n,t),F(e,"y",n,t),n.time=t,(a.offset||a.target)&&function(e,t,n){let{offset:a=O}=n,{target:s=e,axis:r="y"}=n,i="y"===r?"height":"width",l=s!==e?function(e,t){let n={x:0,y:0},a=e;for(;a&&a!==t;)if((0,S.isHTMLElement)(a))n.x+=a.offsetLeft,n.y+=a.offsetTop,a=a.offsetParent;else if("svg"===a.tagName){let e=a.getBoundingClientRect(),t=(a=a.parentElement).getBoundingClientRect();n.x+=e.left-t.left,n.y+=e.top-t.top}else if(a instanceof SVGGraphicsElement){let{x:e,y:t}=a.getBBox();n.x+=e,n.y+=t;let s=null,r=a.parentNode;for(;!s;)"svg"===r.tagName&&(s=r),r=a.parentNode;a=s}else break;return n}(s,e):$,o=s===e?{width:e.scrollWidth,height:e.scrollHeight}:"getBBox"in s&&"svg"!==s.tagName?s.getBBox():{width:s.clientWidth,height:s.clientHeight},c={width:e.clientWidth,height:e.clientHeight};t[r].offset.length=0;let d=!t[r].interpolate,u=a.length;for(let e=0;e<u;e++){let n=function(e,t,n,a){let s=Array.isArray(e)?e:L,r=0;return"number"==typeof e?s=[e,e]:"string"==typeof e&&(s=(e=e.trim()).includes(" ")?e.split(" "):[e,I[e]?e:"0"]),(r=E(s[0],n,a))-E(s[1],t)}(a[e],c[i],o[i],l[r]);d||n===t[r].interpolatorOffsets[e]||(d=!0),t[r].offset[e]=n}d&&(t[r].interpolate=(0,C.interpolate)(t[r].offset,(0,A.defaultOffset)(a),{clamp:!1}),t[r].interpolatorOffsets=[...t[r].offset]),t[r].progress=(0,M.clamp)(0,1,t[r].interpolate(t[r].current))}(e,n,a)},notify:()=>t(n)}}(a,e,{time:0,x:N(),y:N()},s);if(r.add(i),!B.has(a)){let e,s=()=>{for(let e of r)e.measure(c.frameData.timestamp);c.frame.preUpdate(i)},i=()=>{for(let e of r)e.notify()},l=()=>c.frame.read(s);B.set(a,l);let o=W(a);window.addEventListener("resize",l,{passive:!0}),a!==document.documentElement&&P.set(a,"function"==typeof a?(v.add(a),n||(n=()=>{let e={get width(){return window.innerWidth},get height(){return window.innerHeight}};v.forEach(t=>t(e))},window.addEventListener("resize",n)),()=>{v.delete(a),v.size||"function"!=typeof n||(window.removeEventListener("resize",n),n=void 0)}):(t||"undefined"!=typeof ResizeObserver&&(t=new ResizeObserver(y)),(e=(0,h.resolveElements)(a)).forEach(e=>{let n=f.get(e);n||(n=new Set,f.set(e,n)),n.add(l),t?.observe(e)}),()=>{e.forEach(e=>{let n=f.get(e);n?.delete(l),n?.size||t?.unobserve(e)})})),o.addEventListener("scroll",l,{passive:!0}),l()}let l=B.get(a);return c.frame.read(l,!1,!0),()=>{(0,c.cancelFrame)(l);let e=T.get(a);if(!e||(e.delete(i),e.size))return;let t=B.get(a);B.delete(a),t&&(W(a).removeEventListener("scroll",t),P.get(a)?.(),window.removeEventListener("resize",t))}}let R=new Map;function H({source:e,container:t,...n}){var a;let s,r,{axis:i}=n;e&&(t=e);let l=R.get(t)??new Map;R.set(t,l);let o=n.target??"self",c=l.get(o)??{},d=i+(n.offset??[]).join(",");return c[d]||(c[d]=!n.target&&(0,u.supportsScrollTimeline)()?new ScrollTimeline({source:t,axis:i}):(a={container:t,...n},s={value:0},r=z(e=>{s.value=100*e[a.axis].progress},a),{currentTime:s,cancel:r})),c[d]}var V=e.i(47414),X=e.i(74008);let q=()=>({scrollX:(0,i.motionValue)(0),scrollY:(0,i.motionValue)(0),scrollXProgress:(0,i.motionValue)(0),scrollYProgress:(0,i.motionValue)(0)}),D=e=>!!e&&!e.current;function K({container:e,target:t,...n}={}){let a=(0,V.useConstant)(q),r=(0,s.useRef)(null),i=(0,s.useRef)(!1),c=(0,s.useCallback)(()=>(r.current=function(e,{axis:t="y",container:n=document.scrollingElement,...a}={}){var s,r;let i;if(!n)return o.noop;let l={axis:t,container:n,...a};return"function"==typeof e?(s=e,r=l,2===s.length?z(e=>{s(e[r.axis].progress,e)},r):d(s,H(r))):(i=H(l),e.attachTimeline({timeline:l.target?void 0:i,observe:e=>(e.pause(),d(t=>{e.time=e.iterationDuration*t},i))}))}((e,{x:t,y:n})=>{a.scrollX.set(t.current),a.scrollXProgress.set(t.progress),a.scrollY.set(n.current),a.scrollYProgress.set(n.progress)},{...n,container:e?.current||void 0,target:t?.current||void 0}),()=>{r.current?.()}),[e,t,JSON.stringify(n.offset)]);return(0,X.useIsomorphicLayoutEffect)(()=>{if(i.current=!1,!(D(e)||D(t)))return c();i.current=!0},[c]),(0,s.useEffect)(()=>i.current?((0,l.invariant)(!D(e),"Container ref is defined but not hydrated","use-scroll-ref"),(0,l.invariant)(!D(t),"Target ref is defined but not hydrated","use-scroll-ref"),c()):void 0,[c]),a}var G=e.i(37806);function U(e,t){let n=function(e){let t=(0,V.useConstant)(()=>(0,i.motionValue)(e)),{isStatic:n}=(0,s.useContext)(G.MotionConfigContext);if(n){let[,n]=(0,s.useState)(e);(0,s.useEffect)(()=>t.on("change",n),[])}return t}(t()),a=()=>n.set(t());return a(),(0,X.useIsomorphicLayoutEffect)(()=>{let t=()=>c.frame.preRender(a,!1,!0),n=e.map(e=>e.on("change",t));return()=>{n.forEach(e=>e()),(0,c.cancelFrame)(a)}}),n}function Y(e,t){let n=(0,V.useConstant)(()=>[]);return U(e,()=>{n.length=0;let a=e.length;for(let t=0;t<a;t++)n[t]=e[t].get();return t(n)})}var J=e.i(75254);let Z=(0,J.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var Q=e.i(63059),_=e.i(10980),ee=e.i(20278);let et=(0,J.default)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);var en=e.i(69638),ea=e.i(72520);let es=(0,J.default)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]);var er=e.i(39312);let ei=(0,J.default)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var el=e.i(37727),eo=e.i(22016);function ec({color:e="#007AFF",height:t=4,totalWords:n=0,currentWordCount:i=0,showPercentage:l=!0,showWordCount:o=!1}){let{scrollYProgress:c}=K(),[d,u]=(0,s.useState)(0);return(0,s.useEffect)(()=>{let e=c.onChange(e=>{u(e)});return()=>e()},[c]),(0,a.jsxs)("div",{className:"fixed top-0 left-0 right-0 z-50 cursor-pointer",onClick:e=>{let t=e.currentTarget.getBoundingClientRect(),n=(e.clientX-t.left)/t.width,a=document.documentElement.scrollHeight-window.innerHeight;window.scrollTo({top:n*a,behavior:"smooth"})},role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(100*d),children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-200 dark:bg-gray-700",style:{height:t}}),(0,a.jsx)(r.motion.div,{className:"absolute inset-0",style:{backgroundColor:e,scaleX:c,transformOrigin:"left",height:t}}),(0,a.jsxs)("div",{className:"absolute right-0 top-0 transform -translate-y-full mt-2 mr-4 flex items-center space-x-2",children:[l&&(0,a.jsxs)("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 px-2 py-1 rounded shadow-md",children:[Math.round(100*d),"%"]}),o&&n>0&&(0,a.jsxs)("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 px-2 py-1 rounded shadow-md",children:[i.toLocaleString()," / ",n.toLocaleString()]})]})]})}e.i(57688);let ed=(0,s.createContext)(void 0);function eu({children:e}){let[t,n]=(0,s.useState)({activeId:null,hoveredId:null,relatedIds:[]}),[r,i]=(0,s.useState)(new Map),l=(0,s.useCallback)(e=>{i(t=>new Map(t).set(e.id,e))},[]),o=(0,s.useCallback)(e=>{i(t=>{let n=new Map(t);return n.delete(e),n}),n(t=>t.activeId===e||t.hoveredId===e?{activeId:null,hoveredId:null,relatedIds:[]}:t)},[]),c=(0,s.useCallback)(e=>{if(!e)return void n({activeId:null,hoveredId:null,relatedIds:[]});let t=r.get(e);t&&n({activeId:e,hoveredId:null,relatedIds:t.relatedIds})},[r]),d=(0,s.useCallback)(e=>{if(!e)return void n(e=>({...e,hoveredId:null,relatedIds:e.activeId&&r.get(e.activeId)?.relatedIds||[]}));let t=r.get(e);t&&n(n=>({...n,hoveredId:e,relatedIds:t.relatedIds}))},[r]),u=(0,s.useCallback)(()=>{n({activeId:null,hoveredId:null,relatedIds:[]})},[]),m=(0,s.useCallback)(e=>t.activeId===e||t.hoveredId===e||t.relatedIds.includes(e),[t]),h=(0,s.useCallback)(e=>{let t=r.get(e);return t?t.relatedIds.map(e=>r.get(e)).filter(Boolean):[]},[r]);return(0,a.jsx)(ed.Provider,{value:{syncState:t,syncItems:r,registerSyncItem:l,unregisterSyncItem:o,setActiveItem:c,setHoveredItem:d,clearSyncState:u,isItemActive:m,getRelatedItems:h},children:e})}function em({id:e,type:t,relatedIds:n=[],section:r,className:i="",children:l,onClick:o,onMouseEnter:c,onMouseLeave:d}){let{registerSyncItem:u,unregisterSyncItem:m,setActiveItem:h,setHoveredItem:f,isItemActive:x}=function(){let e=(0,s.useContext)(ed);if(void 0===e)throw Error("useSync must be used within a SyncProvider");return e}(),[p,g]=(0,s.useState)("");s.default.useEffect(()=>{let a=e=>"string"==typeof e?e:Array.isArray(e)?e.map(a).join(""):s.default.isValidElement(e)&&e.props?.children?a(e.props.children):"",i="string"==typeof l?l:s.default.isValidElement(l)&&l.props.children?"string"==typeof l.props.children?l.props.children:a(l.props.children):"";return g(i),u({id:e,type:t,content:i,relatedIds:n,section:r}),()=>{m(e)}},[e,t,n,r,l,u,m]);let b=x(e);return(0,a.jsx)("span",{className:(()=>{let e=i;if(b)switch(t){case"formula":e+=" bg-blue-100 border-blue-300 border-l-4 pl-2 transition-all duration-300";break;case"text":e+=" bg-yellow-50 rounded px-1 transition-all duration-300";break;case"visualization":e+=" ring-2 ring-blue-400 rounded transition-all duration-300";break;case"keyword":e+=" text-blue-600 font-semibold transition-all duration-300"}return("keyword"===t||"formula"===t)&&(e+=" cursor-pointer hover:text-blue-500"),e})(),onClick:()=>{h(e),o&&o()},onMouseEnter:()=>{f(e),c&&c()},onMouseLeave:()=>{f(null),d&&d()},"data-sync-id":e,"data-sync-type":t,children:l})}function eh({id:e,term:t,definition:n,relatedIds:r,section:i,className:l="",children:o,tooltip:c}){let[d,u]=(0,s.useState)(!1);return(0,a.jsxs)("span",{className:"relative inline-block",children:[(0,a.jsx)(em,{id:e,type:"keyword",relatedIds:r,section:i,className:`border-b border-dotted border-gray-400 ${l}`,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:o||t}),(n||c)&&d&&(0,a.jsx)("div",{className:"absolute z-10 w-48 p-2 mt-1 text-sm text-white bg-gray-900 rounded shadow-lg",children:n||c})]})}var ef=e.i(29483);function ex(e="id"){return`${e}-${Math.random().toString(36).substr(2,9)}`}function ep({targetId:e="main-content",children:t="跳转到主要内容",className:n=""}){let s={href:`#${e}`,className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded z-50",onClick:t=>{t.preventDefault(),function(e,t={behavior:"smooth"}){let n=document.getElementById(e);n&&(n.scrollIntoView(t),n.focus())}(e)}};return(0,a.jsx)("a",{...s,className:`sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded z-50 ${n}`,children:t})}function eg({links:e,className:t=""}){return(0,a.jsx)("div",{className:`sr-only focus-within:not-sr-only focus-within:absolute focus-within:top-4 focus-within:left-4 focus-within:z-50 focus-within:flex focus-within:flex-col focus-within:gap-2 ${t}`,children:e.map(e=>(0,a.jsx)(ep,{targetId:e.id,children:e.label},e.id))})}function eb(){return(0,a.jsx)(eg,{links:[{id:"main-content",label:"跳转到主要内容"},{id:"navigation",label:"跳转到导航"},{id:"chapter-index",label:"跳转到章节索引"},{id:"search",label:"跳转到搜索"},{id:"footer",label:"跳转到页脚"}]})}function ey({title:e,chapterNumber:t,logicalPosition:n,objectives:l,coreContent:o,keywords:c,prerequisitePrompt:d,openingLine:u,mainContent:m,logicalChain:h,chapterSummary:f,nextChapterPreview:x,sectMentality:p,toc:g,children:b,onPreviousChapter:y,onNextChapter:v,onChapterSelect:j}){let[w,N]=(0,s.useState)(null),[k,F]=(0,s.useState)(0),[A,M]=(0,s.useState)(!1),[S,I]=(0,s.useState)(!1),[E,L]=(0,s.useState)(0),[O,$]=(0,s.useState)(!0),[B,P]=(0,s.useState)("down"),[T,W]=(0,s.useState)(0),[z,R]=(0,s.useState)(0),H=(0,s.useRef)(null),[V,X]=(0,s.useState)(0),[q,D]=(0,s.useState)(!1),[G,J]=(0,s.useState)(20);!function(){let[e,t]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=window.matchMedia("(prefers-reduced-motion: reduce)"),n=e=>{t(e.matches)};return t(e.matches),e.addEventListener("change",n),()=>{e.removeEventListener("change",n)}},[])}();let{announce:ed,AnnouncementComponent:em}=function(){let[e,t]=(0,s.useState)(""),n=(0,s.useRef)(null);return{announce:(e,a="polite")=>{t(e),n.current?.dataset.timerId&&clearTimeout(parseInt(n.current.dataset.timerId));let s=setTimeout(()=>{t("")},1e3);n.current&&(n.current.dataset.timerId=s.toString())},AnnouncementComponent:()=>(0,a.jsx)("div",{ref:n,className:"sr-only","aria-live":"polite","aria-atomic":"true",children:e})}}(),{elementRef:ep,trapFocus:eg}=function(e){let[t,n]=(0,s.useState)(!1),a=(0,s.useRef)(null);return{isFocused:t,elementRef:a,handleFocus:()=>n(!0),handleBlur:()=>n(!1),setFocus:()=>{a.current&&a.current.focus()},trapFocus:e=>{if(!e.current)return;let t=e.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(0===t.length)return;let n=t[0],a=t[t.length-1],s=e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===n&&(a.focus(),e.preventDefault()):document.activeElement===a&&(n.focus(),e.preventDefault()))};return e.current.addEventListener("keydown",s),()=>e.current?.removeEventListener("keydown",s)}}}(),ey=(0,s.useRef)(null),{scrollY:ev}=K();!function(e,t,n,a){if("function"==typeof e)return i.collectMotionValues.current=[],e(),U(i.collectMotionValues.current,e),i.collectMotionValues.current=void 0;let s="function"==typeof t?t:function(...e){let t=!Array.isArray(e[0]),n=t?0:-1,a=e[0+n],s=e[1+n],r=e[2+n],i=e[3+n],l=(0,C.interpolate)(s,r,i);return t?l(a):l}(t,n,void 0);Array.isArray(e)?Y(e,s):Y([e],([e])=>s(e))}(ev,[0,1e3],[0,1]),(0,s.useEffect)(()=>{H.current&&W((H.current.textContent||"").trim().split(/\s+/).length)},[b]),(0,s.useEffect)(()=>ev.onChange(e=>{let t=e>E?"down":"up";P(t);let n=Math.min(e/1e3,1);if(F(n),M(n>.2&&n<.8),H.current&&T>0&&R(Math.round(n*T)),Math.round(100*n)%25==0){let e=Math.round(100*n);ed(`章节阅读进度：${e}%`)}"down"===t&&e-E>2&&e>50?$(!1):"up"===t&&E-e>2&&$(!0),J(20),Math.abs(e-E)>10&&I(!1),L(e)}),[ev,E,ed,H,T]),ex("main-content");let ej=ex("navigation");return(0,a.jsx)(ef.ChapterTransitionProvider,{children:(0,a.jsx)(ef.ChapterTransitionContainer,{chapterKey:`chapter-${t}`,children:(0,a.jsxs)(eu,{children:[(0,a.jsx)(eb,{}),(0,a.jsxs)(r.motion.div,{ref:ey,className:"min-h-screen bg-[#f8fafc] text-[#1e293b]",style:{x:V,transition:q?"none":"x 0.3s ease-out"},drag:"x",dragConstraints:{left:-100,right:100},onDragStart:()=>{D(!0)},onDrag:(e,t)=>{Math.abs(t.delta.x)>Math.abs(2*t.delta.y)&&X(Math.max(-100,Math.min(100,t.delta.x)))},onDragEnd:(e,t)=>{D(!1),t.offset.x<-50&&v?v():t.offset.x>50&&y&&y(),X(0)},children:[(0,a.jsx)(ec,{color:"#007AFF",height:3,totalWords:T,currentWordCount:z,showPercentage:!0,showWordCount:!0}),(0,a.jsx)(r.motion.header,{className:"sticky top-0 z-40 bg-[#f8fafc]/95 backdrop-blur-sm border-b border-gray-200",initial:{y:-20,opacity:0},animate:{y:O?0:-100,opacity:+!!O},transition:{duration:.3,ease:"easeInOut",delay:.1},role:"banner",id:ej,children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"font-mono text-sm font-bold text-[#007AFF]","aria-label":`章节编号 ${t}`,children:t}),(0,a.jsx)("h1",{className:"font-serif text-2xl font-bold text-[#1e293b]",children:e})]}),(0,a.jsxs)("nav",{className:"flex items-center space-x-2","aria-label":"章节导航",children:[(0,a.jsx)(eo.default,{href:"/chapters",className:"p-2 rounded-full hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-[#007AFF]","aria-label":"返回章节列表",children:(0,a.jsx)(_.BookOpen,{className:"h-5 w-5"})}),y&&(0,a.jsx)("button",{onClick:y,className:"p-2 rounded-full hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-[#007AFF]","aria-label":"上一章",children:(0,a.jsx)(Z,{className:"h-5 w-5"})}),v&&(0,a.jsx)("button",{onClick:v,className:"p-2 rounded-full hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-[#007AFF]","aria-label":"下一章",children:(0,a.jsx)(Q.ChevronRight,{className:"h-5 w-5"})})]})]})})}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[g.length>1&&(0,a.jsx)("div",{className:"lg:hidden mb-6 flex justify-end",children:(0,a.jsxs)("button",{onClick:()=>I(!S),className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg shadow-sm border border-gray-200 hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-[#007AFF] z-50 relative","aria-expanded":S,"aria-label":S?"关闭目录":"打开目录",children:[(0,a.jsx)(_.BookOpen,{className:"h-4 w-4 text-[#007AFF]"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:S?"关闭目录":"章节目录"})]})}),(y||v)&&(0,a.jsxs)("div",{className:"hidden md:flex justify-center items-center space-x-4 mb-8",children:[y&&(0,a.jsxs)(r.motion.button,{type:"button",onClick:y,className:"flex items-center space-x-2 text-sm text-gray-500 hover:text-[#007AFF] hover:bg-gray-50 px-4 py-2 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-[#007AFF]",whileHover:{scale:1.05},"aria-label":"上一章",children:[(0,a.jsx)(Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"上一章"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-400 px-4 py-1 bg-gray-100 rounded-full",children:"左右滑动切换章节"}),v&&(0,a.jsxs)(r.motion.button,{type:"button",onClick:v,className:"flex items-center space-x-2 text-sm text-gray-500 hover:text-[#007AFF] hover:bg-gray-50 px-4 py-2 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-[#007AFF]",whileHover:{scale:1.05},"aria-label":"下一章",children:[(0,a.jsx)("span",{children:"下一章"}),(0,a.jsx)(Q.ChevronRight,{className:"h-4 w-4"})]})]}),g.length>1&&S&&(0,a.jsxs)(r.motion.div,{className:"lg:hidden mb-6 bg-white rounded-lg p-6 shadow-md border border-gray-100 z-50 relative",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},"aria-label":"章节目录",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"font-serif text-lg font-semibold text-[#1e293b] flex items-center gap-2",children:[(0,a.jsx)(_.BookOpen,{className:"h-4 w-4 text-[#007AFF]"}),"章节目录"]}),(0,a.jsx)("button",{onClick:()=>I(!1),className:"text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-[#007AFF] rounded-full p-1 transition-all active:scale-95","aria-label":"关闭目录",children:(0,a.jsx)(el.X,{className:"h-4 w-4"})})]}),(0,a.jsx)("nav",{className:"space-y-1 max-h-60 overflow-y-auto pr-2",children:g.map(e=>(0,a.jsx)("a",{href:`#${e.id}`,className:`block text-sm transition-all hover:text-[#007AFF] py-1.5 px-2 rounded-md hover:bg-blue-50 ${2===e.level?"font-medium text-gray-800":`text-gray-600 pl-${(e.level-2)*4}`}`,"aria-label":`跳转到 ${e.text}`,onClick:()=>I(!1),children:e.text},e.id))})]}),g.length>1&&(0,a.jsx)("button",{onClick:()=>I(!S),className:"fixed left-0 top-1/2 transform -translate-y-1/2 lg:block hidden z-40 bg-[#007AFF] text-white p-2 rounded-r-full hover:bg-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-[#007AFF]","aria-expanded":S,"aria-label":S?"关闭目录":"打开目录",children:(0,a.jsx)(_.BookOpen,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"relative lg:flex lg:justify-center",children:[g.length>1&&(0,a.jsx)(r.motion.aside,{className:"hidden lg:block fixed left-4 z-50",style:{top:`${G}px`},initial:{opacity:0,x:-300,transform:"translateX(-100%)"},animate:{opacity:+!!S,x:S?0:-300,transform:S?"translateX(0)":"translateX(-100%)"},transition:{duration:.3,ease:"easeInOut",type:"tween"},"aria-label":"章节目录",tabIndex:0,onFocus:()=>I(!0),onBlur:()=>I(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg border border-gray-100 w-64 backdrop-blur-sm bg-opacity-95 max-h-[300px]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"font-serif text-lg font-semibold text-[#1e293b] flex items-center gap-2",children:[(0,a.jsx)(_.BookOpen,{className:"h-4 w-4 text-[#007AFF]"}),"章节目录"]}),(0,a.jsx)("button",{onClick:()=>I(!1),className:"text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-[#007AFF] rounded-full p-1 transition-all active:scale-95","aria-label":"关闭目录",children:(0,a.jsx)(el.X,{className:"h-4 w-4"})})]}),(0,a.jsx)("nav",{className:"space-y-1 max-h-[220px] overflow-y-auto pr-2",children:g.map(e=>(0,a.jsx)("a",{href:`#${e.id}`,className:`block text-sm transition-all hover:text-[#007AFF] py-1.5 px-2 rounded-md hover:bg-blue-50 ${2===e.level?"font-medium text-gray-800":`text-gray-600 pl-${(e.level-2)*4}`}`,"aria-label":`跳转到 ${e.text}`,onClick:()=>I(!1),children:e.text},e.id))})]})}),(0,a.jsxs)(r.motion.main,{ref:H,className:"w-full lg:max-w-4xl",onClick:()=>{I(!1)},initial:{opacity:1},animate:{opacity:1,transform:S&&g.length>1?"translateX(20px)":"translateX(0)"},transition:{duration:.3,ease:"easeInOut",type:"tween"},children:[(0,a.jsxs)(r.motion.section,{className:"mb-8 bg-white rounded-lg p-6 shadow-sm border border-gray-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)(ei,{className:"h-5 w-5 text-[#007AFF]"}),(0,a.jsx)("h2",{className:"font-serif text-xl font-semibold",children:"本章逻辑位"})]}),(0,a.jsx)("p",{className:"font-serif text-lg text-gray-700 italic",children:n})]}),(0,a.jsxs)(r.motion.section,{className:"mb-8 bg-white rounded-lg p-6 shadow-sm border border-gray-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)(ee.Target,{className:"h-5 w-5 text-[#007AFF]"}),(0,a.jsx)("h2",{className:"font-serif text-xl font-semibold",children:"章节目标"})]}),(0,a.jsx)("ul",{className:"space-y-3",children:l.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full bg-[#007AFF]/10 flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-[#007AFF]"})}),(0,a.jsx)("p",{className:"text-gray-700",children:e})]},t))})]}),(0,a.jsxs)(r.motion.section,{className:"mb-8 bg-white rounded-lg p-6 shadow-sm border border-gray-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)(_.BookOpen,{className:"h-5 w-5 text-[#007AFF]"}),(0,a.jsx)("h2",{className:"font-serif text-xl font-semibold",children:"核心内容"})]}),(0,a.jsx)("div",{className:"space-y-4",children:o.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full bg-[#007AFF]/10 flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-[#007AFF]"})}),(0,a.jsx)("p",{className:"text-gray-700",children:e})]},t))})]}),(0,a.jsxs)(r.motion.section,{className:"mb-8 bg-white rounded-lg p-6 shadow-sm border border-gray-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)(er.Zap,{className:"h-5 w-5 text-[#007AFF]"}),(0,a.jsx)("h2",{className:"font-serif text-xl font-semibold",children:"关键词"})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-3",children:c.map((e,t)=>(0,a.jsx)(eh,{id:`keyword-${t}`,term:e,definition:`${e}的定义和解释`,relatedIds:[]},t))})]}),(0,a.jsxs)(r.motion.section,{className:"mb-8 bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg p-6 shadow-sm border border-amber-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)(et,{className:"h-5 w-5 text-amber-600"}),(0,a.jsx)("h2",{className:"font-serif text-xl font-semibold text-amber-800",children:"前置认知提示"})]}),(0,a.jsx)("p",{className:"font-serif text-lg text-gray-700 italic",children:d})]}),(0,a.jsxs)(r.motion.section,{className:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-6 shadow-sm border border-blue-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)(es,{className:"h-5 w-5 text-[#007AFF]"}),(0,a.jsx)("h2",{className:"font-serif text-xl font-semibold",children:"起手式"})]}),(0,a.jsx)("blockquote",{className:"font-serif text-lg leading-relaxed italic text-gray-700 border-l-4 border-[#007AFF] pl-4",children:u})]}),(0,a.jsxs)(r.motion.section,{className:"mb-8 space-y-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)(_.BookOpen,{className:"h-5 w-5 text-[#007AFF]"}),(0,a.jsx)("h2",{className:"font-serif text-xl font-semibold",children:"正文"})]}),(0,a.jsx)("div",{className:"space-y-8",children:m.map((e,t)=>(0,a.jsx)("div",{className:"mb-12",id:`section-${t}`,children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-md border border-gray-200 transition-all hover:shadow-lg",children:[e.title&&(0,a.jsx)("h3",{className:"font-serif text-2xl font-semibold mb-6 text-[#1e293b] pb-2 border-b-2 border-[#007AFF]",children:e.title}),(0,a.jsx)("div",{className:"prose max-w-none",children:(0,a.jsx)("p",{className:"text-gray-700 leading-relaxed mb-6",children:e.content})}),e.visualIndex&&(0,a.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 mt-6",children:(0,a.jsxs)("p",{className:"text-sm text-blue-700 italic",children:[(0,a.jsx)("span",{className:"font-medium",children:"视觉索引："})," ",e.visualIndex]})})]})},t))})]}),(0,a.jsxs)(r.motion.section,{className:"mb-8 bg-white rounded-lg p-6 shadow-sm border border-gray-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)(ei,{className:"h-5 w-5 text-[#007AFF]"}),(0,a.jsx)("h2",{className:"font-serif text-xl font-semibold",children:"章节逻辑链"})]}),(0,a.jsx)("p",{className:"font-serif text-lg text-gray-700",children:h})]}),(0,a.jsxs)(r.motion.section,{className:"mb-8 bg-white rounded-lg p-6 shadow-sm border border-gray-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)(en.CheckCircle,{className:"h-5 w-5 text-[#007AFF]"}),(0,a.jsx)("h2",{className:"font-serif text-xl font-semibold",children:"本章小结"})]}),(0,a.jsx)("p",{className:"font-serif text-lg text-gray-700",children:f})]}),(0,a.jsxs)(r.motion.section,{className:"mb-8 bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg p-6 shadow-sm border border-gray-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)(ea.ArrowRight,{className:"h-5 w-5 text-[#007AFF]"}),(0,a.jsx)("h2",{className:"font-serif text-xl font-semibold",children:"欲知后事如何且听下回分解"})]}),(0,a.jsx)("p",{className:"font-serif text-lg text-gray-700 italic",children:x}),(0,a.jsxs)("div",{className:"flex justify-between mt-6",children:[y&&(0,a.jsxs)("button",{onClick:y,className:"flex items-center space-x-2 text-[#007AFF] hover:text-blue-600 transition-colors",children:[(0,a.jsx)(Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"上一章"})]}),v&&(0,a.jsxs)("button",{onClick:v,className:"flex items-center space-x-2 text-[#007AFF] hover:text-blue-600 transition-colors",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"下一章"}),(0,a.jsx)(Q.ChevronRight,{className:"h-4 w-4"})]})]})]}),(0,a.jsxs)(r.motion.section,{className:"mb-8 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-6 shadow-sm border-2 border-purple-200",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.1},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)(es,{className:"h-5 w-5 text-purple-600"}),(0,a.jsx)("h2",{className:"font-serif text-xl font-semibold text-purple-800",children:"宗门心法"})]}),(0,a.jsx)("div",{className:"font-serif text-gray-700",children:p.overview})]}),b&&(0,a.jsx)(r.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2},children:b})]})]})]})]})]})})})}var ev=e.i(18566);function ej({title:e,chapterNumber:t,children:n}){return(0,a.jsxs)("div",{className:"min-h-screen bg-[#f8fafc] text-[#1e293b]",children:[(0,a.jsxs)(r.motion.section,{className:"mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,a.jsx)("h1",{className:"font-serif text-4xl font-bold text-[#1e293b] mb-4 text-center",children:e}),(0,a.jsx)("div",{className:"text-center font-mono text-lg text-[#007AFF]",children:t})]}),n]})}function ew({chapterData:e,sections:t,navigation:n,toc:s}){let r=t?.find(e=>"ChapterTitle"===e.component),i=r?.title||e.metadata.title,l=t?.find(e=>"LogicalPosition"===e.component)?.content||"",o=t?.find(e=>"ChapterObjectives"===e.component)?.content?.split("\n").filter(e=>e.trim().startsWith("- ")).map(e=>e.replace("- ","").trim())||[],c=t?.find(e=>"CoreContent"===e.component)?.content?.split("\n").filter(e=>e.trim().startsWith("- ")).map(e=>e.replace("- ","").trim())||[],d=t?.find(e=>"Keywords"===e.component)?.content?.split(/[,，]/).map(e=>e.trim()).filter(e=>e.length>0)||[],u=t?.find(e=>"PrerequisitePrompt"===e.component)?.content||"",m=t?.find(e=>"OpeningLine"===e.component)?.content||"",h=["ChapterTitle","LogicalPosition","ChapterObjectives","CoreContent","Keywords","PrerequisitePrompt","OpeningLine","ChapterSummary","LogicalChain","NextChapterPreview","SectMentality","MainContent"],f=t?.filter(e=>!h.includes(e.component)).map(e=>({title:e.title,content:e.content}))||[],x=f.length>0?f:[{title:void 0,content:t?.find(e=>"MainContent"===e.component)?.content||""}],p=t?.find(e=>"ChapterSummary"===e.component)?.content||"",g=t?.find(e=>"LogicalChain"===e.component)?.content||"",b=t?.find(e=>"NextChapterPreview"===e.component)?.content||"",y={overview:(t?.find(e=>"SectMentality"===e.component)?.content||"").trim(),breakthrough:[],corePrinciple:""},v=`CH.${(e=>{if(!e||"string"!=typeof e)return"00";let t=e.match(/[0-9]+/g);return t?t.length>=2?t[1].padStart(2,"0"):t[0].padStart(2,"0"):"00"})(e.slug)}`,j=(0,ev.useRouter)();return(0,a.jsx)(ey,{title:i,chapterNumber:v,logicalPosition:l,objectives:o,coreContent:c,keywords:d,prerequisitePrompt:u,openingLine:m,mainContent:x,logicalChain:g,chapterSummary:p,nextChapterPreview:b,sectMentality:y,toc:s||[],onPreviousChapter:n?.prev?()=>{n?.prev&&j.push(`/chapters/${n.prev}`)}:void 0,onNextChapter:n?.next?()=>{n?.next&&j.push(`/chapters/${n.next}`)}:void 0})}(0,e.i(70703).default)(()=>e.A(1255).then(e=>e.MDXContentRenderer),{loadableGenerated:{modules:[43795]}}),e.s(["ChapterTemplateClient",()=>ew,"SimpleChapterTemplate",()=>ej],43709)}]);