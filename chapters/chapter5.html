<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第5章：非平衡载流子与复合动力学 - SEMI_PROJ</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .chapter-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .chapter-core {
            background-color: #f8f9fa;
            border-left: 4px solid var(--primary-color);
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-radius: 0 8px 8px 0;
        }
        
        .section {
            margin-bottom: 3rem;
        }
        
        .section h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border-color);
        }
        
        .subsection {
            margin-bottom: 2rem;
        }
        
        .subsection h4 {
            margin-bottom: 1rem;
            color: var(--dark-color);
        }
        
        .equation {
            background: rgba(0,123,255,0.1);
            border-left: 4px solid var(--primary-color);
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            text-align: center;
            border-radius: 0 8px 8px 0;
        }
        
        /* 章节目标样式 */
        .chapter-objectives {
            background-color: #e3f2fd;
            border-left: 4px solid var(--primary-color);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 8px 8px 0;
        }
        
        .chapter-objectives h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .chapter-objectives ul {
            padding-left: 1.5rem;
        }
        
        .chapter-objectives li {
            margin-bottom: 0.5rem;
            line-height: 1.6;
        }
        
        /* 关键词样式 */
        .chapter-keywords {
            background-color: #f3e5f5;
            border-left: 4px solid var(--secondary-color);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 8px 8px 0;
        }
        
        .chapter-keywords h3 {
            color: var(--secondary-color);
            margin-bottom: 1rem;
        }
        
        .keywords-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .keyword {
            background-color: var(--secondary-color);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            display: inline-block;
        }
        
        /* 模拟器样式 */
        .recombination-simulator {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .simulator-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .control-group {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
        }
        
        .control-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .control-input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .slider-container {
            margin-top: 0.5rem;
        }
        
        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
        }
        
        .slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            border: none;
        }
        
        .slider-value {
            display: inline-block;
            margin-left: 0.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .chart-area {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .results-panel {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #eee;
        }
        
        .result-item:last-child {
            border-bottom: none;
        }
        
        .result-label {
            font-weight: 500;
        }
        
        .result-value {
            font-weight: bold;
            color: var(--primary-color);
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .chapter-container {
                padding: 1rem;
            }
            
            .simulator-controls {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <a href="../index.html" class="logo">
                <h1>SEMI_PROJ</h1>
                <p>半导体器件与制造技术交互式指南</p>
            </a>
            <nav class="main-nav">
                <ul>
                    <li><a href="../index.html" class="nav-link">首页</a></li>
                    <li><a href="../index.html#part1" class="nav-link">第一部分</a></li>
                    <li><a href="../index.html#part2" class="nav-link">第二部分</a></li>
                    <li><a href="../index.html#part3" class="nav-link">第三部分</a></li>
                    <li><a href="../index.html#part4" class="nav-link">第四部分</a></li>
                </ul>
            </nav>
            <div class="menu-toggle">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>
    
    <!-- 左侧菜单目录 -->
    <aside class="sidebar">
        <button class="sidebar-toggle">
            <i class="fas fa-chevron-left"></i>
        </button>
        
        <div class="sidebar-content">
            <div class="sidebar-header">
                <h3>章节导航</h3>
                <button class="sidebar-hide-btn" title="隐藏侧边栏">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <nav class="chapter-nav">
                <a href="../index.html" class="chapter-nav-item">
                    <i class="fas fa-home"></i> 返回主页
                </a>
                
                <a href="preface.html" class="chapter-nav-item ">
                    序言：硅基文明与信息时代
                </a>
                <a href="chapter1.html" class="chapter-nav-item ">
                    第1章：量子力学基础与固体中的电子
                </a>
                <a href="chapter2.html" class="chapter-nav-item ">
                    第2章：半导体材料与晶体结构
                </a>
                <a href="chapter3.html" class="chapter-nav-item ">
                    第3章：载流子统计与热平衡
                </a>
                <a href="chapter4.html" class="chapter-nav-item ">
                    第4章：载流子输运现象
                </a>
                <a href="chapter5.html" class="chapter-nav-item active">
                    第5章：非平衡载流子与复合动力学
                </a>
                <a href="chapter6.html" class="chapter-nav-item ">
                    第6章：高场效应与量子输运
                </a>
                <a href="chapter7.html" class="chapter-nav-item ">
                    第7章：PN结与金属-半导体接触
                </a>
                <a href="chapter8.html" class="chapter-nav-item ">
                    第8章：MOS结构物理
                </a>
                <a href="chapter9.html" class="chapter-nav-item ">
                    第9章：异质结与能带调控
                </a>
                <a href="chapter10.html" class="chapter-nav-item ">
                    第10章：金属-氧化物-半导体场效应晶体管（MOSFET）
                </a>
                <a href="chapter11.html" class="chapter-nav-item ">
                    第11章：双极结型晶体管（BJT）与特种器件
                </a>
                <a href="chapter12.html" class="chapter-nav-item ">
                    第12章：光电子与量子效应器件
                </a>
                <a href="chapter13.html" class="chapter-nav-item ">
                    第13章：晶圆制备与薄膜工程
                </a>
                <a href="chapter14.html" class="chapter-nav-item ">
                    第14章：图形化与掺杂技术
                </a>
                <a href="chapter15.html" class="chapter-nav-item ">
                    第15章：工艺集成与后端互连
                </a>
                <a href="chapter16.html" class="chapter-nav-item ">
                    第16章：半导体材料与器件表征
                </a>
                <a href="chapter17.html" class="chapter-nav-item ">
                    第17章：紧凑模型与电路仿真
                </a>
                <a href="chapter18.html" class="chapter-nav-item ">
                    第18章：VLSI与SoC设计基础
                </a>
                <a href="chapter19.html" class="chapter-nav-item ">
                    第19章：互连、功耗与可靠性
                </a>
                <a href="chapter20.html" class="chapter-nav-item ">
                    第20章：超越传统硅基CMOS
                </a>
            </nav>
            
            
            <div class="current-chapter-nav">
                <h4>当前章节</h4>
                <nav class="section-nav">
                    <a href="#nonequilibrium-carriers" class="section-nav-item">
                        非平衡载流子
                    </a>
                    <a href="#recombination-mechanisms" class="section-nav-item">
                        复合机制
                    </a>
                    <a href="#carrier-lifetime" class="section-nav-item">
                        载流子寿命与扩散长度
                    </a>
                    <a href="#continuity-equation" class="section-nav-item">
                        连续性方程
                    </a>
                    <a href="#recombination-simulator" class="section-nav-item">
                        复合动力学模拟器
                    </a>
                    <a href="#chapter-summary" class="section-nav-item">
                        本章小结
                    </a>
                </nav>
            </div>
        </div>
    </aside>
    

    <main class="main-content">
        <div class="chapter-container">
            <div class="breadcrumb">
                <p><a href="../index.html">首页</a> &gt; <a href="../index.html#part2">第二部分：载流子动力学与输运</a> &gt; 第5章：非平衡载流子与复合动力学</p>
            </div>
            <div class="chapter-header">
                <h1>第5章：非平衡载流子与复合动力学</h1>
            </div>
            
            <div class="chapter-core">
                <h3>核心内容</h3>
                <p>定义非平衡载流子（过剩载流子）。详细阐述载流子的产生与复合机制：直接复合、间接复合（通过复合中心）、表面复合。定义少数载流子寿命（τ）与扩散长度（L）。建立描述载流子时空演化的连续性方程。</p>
            </div>
            
            <div class="chapter-objectives">
                <h3>章节目标</h3>
                <ul>
                    <li>理解半导体脱离热平衡状态的物理过程</li>
                    <li>掌握各种复合机制的物理图像</li>
                    <li>能够运用连续性方程分析一维稳态下的载流子分布</li>
                </ul>
            </div>
            
            <div class="chapter-keywords">
                <h3>关键词</h3>
                <div class="keywords-list">
                    <span class="keyword">非平衡载流子</span>
                    <span class="keyword">产生</span>
                    <span class="keyword">复合</span>
                    <span class="keyword">直接复合</span>
                    <span class="keyword">间接复合</span>
                    <span class="keyword">复合中心</span>
                    <span class="keyword">表面复合</span>
                    <span class="keyword">少数载流子寿命（τ）</span>
                    <span class="keyword">扩散长度（L）</span>
                    <span class="keyword">连续性方程</span>
                </div>
            </div>
            
            <!-- 5.1 非平衡载流子 -->
            <div id="nonequilibrium-carriers" class="section">
                <h3>5.1 非平衡载流子</h3>
                
                <div class="subsection">
                    <h4>5.1.1 非平衡载流子的定义</h4>
                    <p>在热平衡状态下，半导体中的载流子浓度n₀和p₀满足质量作用定律n₀p₀ = nᵢ²。当半导体受到外部激发（如光照射、电场注入等）时，载流子浓度会偏离热平衡值，产生过剩载流子。</p>
                    
                    <p>非平衡载流子（过剩载流子）是指超过热平衡浓度的载流子，包括过剩电子Δn和过剩空穴Δp：</p>
                    <div class="equation">
                        n = n₀ + Δn<br>
p = p₀ + Δp
                    </div>
                    
                    <p>对于非简并半导体，过剩电子和过剩空穴的浓度相等，即Δn = Δp，这是因为载流子的产生和复合过程通常成对出现。</p>
                </div>
                
                <div class="subsection">
                    <h4>5.1.2 非平衡载流子的产生</h4>
                    <p>非平衡载流子的产生主要有两种机制：</p>
                    <ul>
                        <li><strong>光激发</strong>：当半导体吸收光子能量大于禁带宽度的光时，价带电子会被激发到导带，产生电子-空穴对</li>
                        <li><strong>电注入</strong>：通过电场或电流注入，在半导体中产生过剩载流子，如PN结正向偏置时的载流子注入</li>
                    </ul>
                    
                    <p>光激发产生的电子-空穴对浓度与光强成正比，而电注入产生的载流子浓度与注入电流成正比。</p>
                </div>
            </div>
            
            <!-- 5.2 复合机制 -->
            <div id="recombination-mechanisms" class="section">
                <h3>5.2 复合机制</h3>
                
                <p>复合是指电子和空穴结合，释放能量并消失的过程。根据复合过程的不同，复合机制可以分为以下几种类型：</p>
                
                <div class="subsection">
                    <h4>5.2.1 直接复合</h4>
                    <p>直接复合是指导带中的电子直接跃迁到价带，与空穴结合的过程。在直接复合中，电子和空穴直接复合，释放出光子能量：</p>
                    <div class="equation">
                        e⁻ + h⁺ → 光子 (直接复合)
                    </div>
                    
                    <p>直接复合的速率与导带电子浓度和价带空穴浓度成正比：</p>
                    <div class="equation">
                        R = rnp
                    </div>
                    <p>其中，r是直接复合系数，与半导体材料的特性有关。</p>
                    
                    <p>直接复合是直接带隙半导体（如GaAs）中的主要复合机制，而在间接带隙半导体（如Si、Ge）中，直接复合的概率非常小。</p>
                </div>
                
                <div class="subsection">
                    <h4>5.2.2 间接复合（通过复合中心）</h4>
                    <p>间接复合是指电子和空穴通过禁带中的复合中心能级进行复合的过程。在间接复合中，电子首先从导带跃迁到复合中心，然后再从复合中心跃迁到价带，与空穴结合，释放出的能量通常以声子的形式释放：</p>
                    
                    <div class="equation">
                        e⁻ + 复合中心 → 捕获电子<br>
捕获电子的复合中心 + h⁺ → 复合中心 + 声子 (间接复合)
                    </div>
                    
                    <p>间接复合是间接带隙半导体（如Si、Ge）中的主要复合机制，由Shockley-Read-Hall（SRH）理论描述。复合中心通常是半导体中的杂质或缺陷，它们在禁带中引入能级，促进电子和空穴的复合。</p>
                    
                    <p>SRH复合理论指出，间接复合的速率与复合中心浓度、电子和空穴浓度有关，复合率在复合中心能级位于禁带中央附近时最大。</p>
                </div>
                
                <div class="subsection">
                    <h4>5.2.3 表面复合</h4>
                    <p>表面复合是指发生在半导体表面的复合过程。半导体表面存在大量的悬挂键和缺陷，这些缺陷在禁带中引入能级，成为复合中心。表面复合速率通常比体内复合速率高得多。</p>
                    
                    <p>表面复合率与表面复合速度s和表面附近的过剩载流子浓度成正比：</p>
                    <div class="equation">
                        U_s = sΔp
                    </div>
                    <p>其中，s是表面复合速度，单位为cm/s。</p>
                    
                    <p>表面复合对半导体器件的性能有重要影响，特别是对于表面积与体积比较大的小尺寸器件。</p>
                </div>
            </div>
            
            <!-- 5.3 载流子寿命与扩散长度 -->
            <div id="carrier-lifetime" class="section">
                <h3>5.3 载流子寿命与扩散长度</h3>
                
                <div class="subsection">
                    <h4>5.3.1 少数载流子寿命</h4>
                    <p>少数载流子寿命τ是指非平衡少数载流子在复合前存在的平均时间。它是描述半导体中复合过程快慢的重要参数。</p>
                    
                    <p>对于N型半导体，少数载流子是空穴，其寿命τₚ定义为过剩空穴Δp减少到初始值1/e所需的时间：</p>
                    <div class="equation">
                        Δp(t) = Δp(0)e^(-t/τₚ)
                    </div>
                    
                    <p>同样，对于P型半导体，少数载流子是电子，其寿命τₙ定义为过剩电子Δn减少到初始值1/e所需的时间。</p>
                    
                    <p>载流子寿命受多种因素影响，包括复合中心浓度、温度和掺杂浓度等。在高质量半导体材料中，少数载流子寿命可以达到毫秒级，而在低质量材料中，寿命可能只有纳秒级。</p>
                </div>
                
                <div class="subsection">
                    <h4>5.3.2 扩散长度</h4>
                    <p>扩散长度L是指少数载流子在复合前能够扩散的平均距离。它与少数载流子寿命τ和扩散系数D的关系为：</p>
                    <div class="equation">
                        L = √(Dτ)
                    </div>
                    
                    <p>扩散长度是半导体器件设计中的重要参数，特别是对于PN结、太阳能电池等器件，扩散长度决定了载流子能够有效收集的区域大小。</p>
                    
                    <p>对于N型半导体，空穴的扩散长度Lₚ = √(Dₚτₚ)；对于P型半导体，电子的扩散长度Lₙ = √(Dₙτₙ)。</p>
                </div>
            </div>
            
            <!-- 5.4 连续性方程 -->
            <div id="continuity-equation" class="section">
                <h3>5.4 连续性方程</h3>
                
                <p>连续性方程是描述载流子浓度随时间和空间变化的基本方程，它考虑了载流子的产生、复合、漂移和扩散过程。</p>
                
                <p>对于一维情况，电子和空穴的连续性方程分别为：</p>
                
                <div class="equation">
                    ∂n/∂t = G - R - (1/q) ∂Jₙ/∂x<br>
                    ∂p/∂t = G - R + (1/q) ∂Jₚ/∂x
                </div>
                
                <p>其中，G是载流子产生率，R是复合率，Jₙ和Jₚ分别是电子和空穴的电流密度。</p>
                
                <p>将电流密度方程（漂移电流+扩散电流）代入连续性方程，可以得到：</p>
                
                <div class="equation">
                    ∂n/∂t = G - R + Dₙ ∂²n/∂x² - μₙ E ∂n/∂x - μₙ n ∂E/∂x<br>
                    ∂p/∂t = G - R + Dₚ ∂²p/∂x² + μₚ E ∂p/∂x + μₚ p ∂E/∂x
                </div>
                
                <p>连续性方程是分析半导体器件中载流子分布和电流流动的基本工具，广泛应用于PN结、晶体管、太阳能电池等器件的分析。</p>
                
                <div class="subsection">
                    <h4>5.4.1 一维稳态连续性方程</h4>
                    <p>在稳态条件下（∂n/∂t = ∂p/∂t = 0），且忽略电场的影响（E = 0），连续性方程可以简化为：</p>
                    
                    <div class="equation">
                        Dₙ ∂²n/∂x² - (n - n₀)/τₙ + G = 0<br>
                        Dₚ ∂²p/∂x² - (p - p₀)/τₚ + G = 0
                    </div>
                    
                    <p>这个简化的连续性方程常用于分析半导体中的扩散问题，如光照射下的载流子分布、PN结的少子注入等。</p>
                </div>
            </div>
            
            <!-- 5.5 复合动力学模拟器 -->
            <div id="recombination-simulator" class="section">
                <h3>5.5 复合动力学模拟器</h3>
                <p>通过调整参数，观察不同条件下非平衡载流子的复合过程：</p>
                
                <div class="recombination-simulator">
                    <div class="simulator-controls">
                        <div class="control-group">
                            <label class="control-label">半导体类型：</label>
                            <select class="control-input" id="semiconductor-type">
                                <option value="n-type">N型</option>
                                <option value="p-type">P型</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label class="control-label">少数载流子寿命 (μs)</label>
                            <div class="slider-container">
                                <input type="range" class="slider" id="lifetime-slider" min="0.1" max="100" step="0.1" value="10">
                                <span class="slider-value" id="lifetime-value">10</span> μs
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">扩散系数 (cm²/s)</label>
                            <div class="slider-container">
                                <input type="range" class="slider" id="diffusion-slider" min="1" max="100" step="1" value="35">
                                <span class="slider-value" id="diffusion-value">35</span> cm²/s
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">初始过剩载流子浓度 (cm⁻³)</label>
                            <div class="slider-container">
                                <input type="range" class="slider" id="initial-concentration-slider" min="1e12" max="1e16" step="1e12" value="1e14">
                                <span class="slider-value" id="initial-concentration-value">1.00e+14</span> cm⁻³
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-area">
                        <canvas id="recombination-chart" width="800" height="400"></canvas>
                    </div>
                    
                    <div class="results-panel">
                        <h4>复合动力学计算结果</h4>
                        <div class="result-item">
                            <span class="result-label">扩散长度 (μm)：</span>
                            <span class="result-value" id="diffusion-length-value">59.16</span> μm
                        </div>
                        <div class="result-item">
                            <span class="result-label">特征时间 (μs)：</span>
                            <span class="result-value" id="characteristic-time-value">10.00</span> μs
                        </div>
                        <div class="result-item">
                            <span class="result-label">稳态载流子浓度 (cm⁻³)：</span>
                            <span class="result-value" id="steady-state-concentration-value">0.00e+00</span> cm⁻³
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 本章小结 -->
            <div id="chapter-summary" class="section">
                <h3>本章小结</h3>
                <div class="chapter-core">
                    <ul>
                        <li>非平衡载流子是指超过热平衡浓度的载流子，包括过剩电子Δn和过剩空穴Δp，且Δn = Δp</li>
                        <li>载流子的复合机制主要有直接复合、间接复合（通过复合中心）和表面复合</li>
                        <li>少数载流子寿命τ是指非平衡少数载流子在复合前存在的平均时间</li>
                        <li>扩散长度L是指少数载流子在复合前能够扩散的平均距离，L = √(Dτ)</li>
                        <li>连续性方程描述了载流子浓度随时间和空间的变化，考虑了产生、复合、漂移和扩散过程</li>
                        <li>连续性方程是分析半导体器件中载流子分布和电流流动的基本工具</li>
                    </ul>
                </div>
                
                <div class="subsection">
                    <h4>下一章预告</h4>
                    <p>第6章将深入介绍高场效应与量子输运，包括高电场下的速度饱和效应、热电子效应、碰撞电离与雪崩倍增，以及隧穿效应和低维结构中的量子限制效应。</p>
                    <button class="btn btn-primary" onclick="window.location.href='chapter6.html'">前往第6章</button>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>关于SEMI_PROJ</h3>
                    <p>致力于打造半导体器件与制造技术的交互式学习平台，提供全面、深入、实用的知识体系。</p>
                </div>
                <div class="footer-section">
                    <h3>快速链接</h3>
                    <ul>
                        <li><a href="../index.html">首页</a></li>
                        <li><a href="../index.html#part1">量子基石与材料特性</a></li>
                        <li><a href="../index.html#part2">载流子动力学与输运</a></li>
                        <li><a href="../index.html#part3">能带工程与界面物理</a></li>
                        <li><a href="../index.html#part4">核心半导体器件物理</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>联系我们</h3>
                    <p>邮箱：info@semiproj.edu</p>
                    <p>电话：+86 123-4567-8900</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 SEMI_PROJ. 保留所有权利。</p>
            </div>
        </div>
    </footer>

    <script src="../js/main.js"></script>
    <script>
        // 物理常数
        const q = 1.602e-19; // 电子电荷量 (C)
        const k = 8.617e-5; // 玻尔兹曼常数 (eV/K)
        
        // 全局变量
        let recombinationChart = null;
        
        // 初始化复合动力学图表
        function initRecombinationChart() {
            const ctx = document.getElementById('recombination-chart').getContext('2d');
            
            // 销毁现有图表
            if (recombinationChart) {
                recombinationChart.destroy();
            }
            
            // 生成初始数据
            const times = Array.from({length: 100}, (_, i) => i * 0.5); // 0到50μs，步长0.5μs
            const lifetime = parseFloat(document.getElementById('lifetime-slider').value);
            const initialConcentration = parseFloat(document.getElementById('initial-concentration-slider').value);
            
            // 指数衰减模型
            const concentrationData = times.map(t => initialConcentration * Math.exp(-t / lifetime));
            
            // 创建新图表
            recombinationChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: times,
                    datasets: [
                        {
                            label: '过剩载流子浓度 (cm⁻³)',
                            data: concentrationData,
                            borderColor: '#3498db',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.4,
                            yAxisID: 'y'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: '时间 (μs)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: '过剩载流子浓度 (cm⁻³)'
                            },
                            type: 'logarithmic',
                            beginAtZero: false,
                            min: initialConcentration * 1e-3
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.parsed.y.toExponential(2)} cm⁻³`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // 更新计算结果
        function updateResults() {
            const lifetime = parseFloat(document.getElementById('lifetime-slider').value);
            const diffusion = parseFloat(document.getElementById('diffusion-slider').value);
            const initialConcentration = parseFloat(document.getElementById('initial-concentration-slider').value);
            
            // 计算扩散长度
            const diffusionLength = Math.sqrt(diffusion * lifetime * 1e-6) * 1e6; // 转换为μm
            
            // 更新显示
            document.getElementById('diffusion-length-value').textContent = diffusionLength.toFixed(2);
            document.getElementById('characteristic-time-value').textContent = lifetime.toFixed(2);
            document.getElementById('steady-state-concentration-value').textContent = '0.00e+00';
        }
        
        // 更新滑块值显示
        function updateSliderValues() {
            document.getElementById('lifetime-value').textContent = document.getElementById('lifetime-slider').value;
            document.getElementById('diffusion-value').textContent = document.getElementById('diffusion-slider').value;
            document.getElementById('initial-concentration-value').textContent = parseFloat(document.getElementById('initial-concentration-slider').value).toExponential(2);
        }
        
        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化图表
            initRecombinationChart();
            
            // 更新初始结果
            updateResults();
            
            // 更新滑块值显示
            updateSliderValues();
            
            // 添加事件监听器
            document.getElementById('lifetime-slider').addEventListener('input', function() {
                updateSliderValues();
                updateResults();
                initRecombinationChart();
            });
            
            document.getElementById('diffusion-slider').addEventListener('input', function() {
                updateSliderValues();
                updateResults();
            });
            
            document.getElementById('initial-concentration-slider').addEventListener('input', function() {
                updateSliderValues();
                initRecombinationChart();
            });
            
            document.getElementById('semiconductor-type').addEventListener('change', function() {
                // 根据半导体类型调整扩散系数和寿命的默认值
                const type = this.value;
                const diffusionSlider = document.getElementById('diffusion-slider');
                const lifetimeSlider = document.getElementById('lifetime-slider');
                
                if (type === 'n-type') {
                    // N型半导体，电子为多子，空穴为少子
                    diffusionSlider.value = 35; // 空穴扩散系数
                    lifetimeSlider.value = 10; // 空穴寿命
                } else {
                    // P型半导体，空穴为多子，电子为少子
                    diffusionSlider.value = 13; // 电子扩散系数
                    lifetimeSlider.value = 25; // 电子寿命
                }
                
                updateSliderValues();
                updateResults();
                initRecombinationChart();
            });
        });
    </script>
</body>
</html>